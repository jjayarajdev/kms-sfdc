2025-07-29 20:16:53.184 | INFO     | __main__:main:37 - Starting FAISS index build process
2025-07-29 20:16:53.184 | INFO     | __main__:main:50 - Initializing SFDC client...
2025-07-29 20:16:53.184 | INFO     | src.data_extraction.sfdc_client:_connect:34 - Connecting to Salesforce with:
2025-07-29 20:16:53.184 | INFO     | src.data_extraction.sfdc_client:_connect:35 -   Username: jaykarki@algo.com
2025-07-29 20:16:53.185 | INFO     | src.data_extraction.sfdc_client:_connect:36 -   Login URL: https://login.salesforce.com
2025-07-29 20:16:53.185 | INFO     | src.data_extraction.sfdc_client:_connect:37 -   Domain: login
2025-07-29 20:16:53.185 | INFO     | src.data_extraction.sfdc_client:_connect:38 -   API Version: 58.0
2025-07-29 20:16:53.185 | INFO     | src.data_extraction.sfdc_client:_connect:39 -   Security Token: ************************
2025-07-29 20:16:54.648 | INFO     | src.data_extraction.sfdc_client:_connect:49 - Successfully connected to Salesforce
2025-07-29 20:16:54.979 | INFO     | src.data_extraction.sfdc_client:test_connection:220 - Salesforce connection test successful
2025-07-29 20:16:54.980 | INFO     | __main__:main:58 - Initializing text processor...
2025-07-29 20:16:54.980 | INFO     | __main__:main:61 - Initializing vector database...
2025-07-29 20:16:54.980 | INFO     | __main__:main:65 - Extracting case data from Salesforce...
2025-07-29 20:16:56.184 | INFO     | __main__:main:74 - Processing batch 1 with 200 records
2025-07-29 20:16:56.184 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:16:56.184 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:16:56.330 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:16:56.331 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 167 exact text duplicates
2025-07-29 20:16:56.346 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:315 - Found 17 near-duplicates by content hash
2025-07-29 20:16:56.346 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:16:56.354 | INFO     | src.utils.text_processor:_apply_quality_filters:373 - Removing 10 cases with high repetition
2025-07-29 20:16:56.356 | INFO     | src.utils.text_processor:_apply_quality_filters:402 - Quality filters removed 10 low-quality records
2025-07-29 20:16:56.356 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 194 records
2025-07-29 20:16:57.107 | INFO     | __main__:main:74 - Processing batch 2 with 200 records
2025-07-29 20:16:57.107 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:16:57.107 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:16:57.192 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:16:57.193 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 166 exact text duplicates
2025-07-29 20:16:57.205 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:315 - Found 20 near-duplicates by content hash
2025-07-29 20:16:57.205 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:16:57.213 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 186 records
2025-07-29 20:16:58.190 | INFO     | __main__:main:74 - Processing batch 3 with 200 records
2025-07-29 20:16:58.191 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:16:58.191 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:16:58.302 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:16:58.302 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 178 exact text duplicates
2025-07-29 20:16:58.308 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:315 - Found 1 near-duplicates by content hash
2025-07-29 20:16:58.308 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:16:58.318 | INFO     | src.utils.text_processor:_apply_quality_filters:373 - Removing 13 cases with high repetition
2025-07-29 20:16:58.320 | INFO     | src.utils.text_processor:_apply_quality_filters:402 - Quality filters removed 13 low-quality records
2025-07-29 20:16:58.320 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 192 records
2025-07-29 20:16:59.745 | INFO     | __main__:main:74 - Processing batch 4 with 200 records
2025-07-29 20:16:59.746 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:16:59.746 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:16:59.886 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:16:59.887 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 157 exact text duplicates
2025-07-29 20:16:59.903 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:315 - Found 19 near-duplicates by content hash
2025-07-29 20:16:59.903 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:16:59.915 | INFO     | src.utils.text_processor:_apply_quality_filters:373 - Removing 11 cases with high repetition
2025-07-29 20:16:59.918 | INFO     | src.utils.text_processor:_apply_quality_filters:402 - Quality filters removed 11 low-quality records
2025-07-29 20:16:59.918 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 187 records
2025-07-29 20:17:00.804 | INFO     | __main__:main:74 - Processing batch 5 with 200 records
2025-07-29 20:17:00.805 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:00.805 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:00.862 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:00.863 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 177 exact text duplicates
2025-07-29 20:17:00.867 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:315 - Found 1 near-duplicates by content hash
2025-07-29 20:17:00.868 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:00.875 | INFO     | src.utils.text_processor:_apply_quality_filters:373 - Removing 4 cases with high repetition
2025-07-29 20:17:00.878 | INFO     | src.utils.text_processor:_apply_quality_filters:402 - Quality filters removed 4 low-quality records
2025-07-29 20:17:00.878 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 183 records
2025-07-29 20:17:01.154 | INFO     | __main__:main:74 - Processing batch 6 with 200 records
2025-07-29 20:17:01.155 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:01.155 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:01.166 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:01.167 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:01.168 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 200 records
2025-07-29 20:17:01.485 | INFO     | __main__:main:74 - Processing batch 7 with 200 records
2025-07-29 20:17:01.486 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:01.486 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:01.498 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:01.499 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:01.500 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 200 records
2025-07-29 20:17:01.919 | INFO     | __main__:main:74 - Processing batch 8 with 200 records
2025-07-29 20:17:01.919 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:01.919 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:01.932 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:01.933 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:01.934 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 200 records
2025-07-29 20:17:02.331 | INFO     | __main__:main:74 - Processing batch 9 with 200 records
2025-07-29 20:17:02.331 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:02.331 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:02.340 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:02.341 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:02.342 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 200 records
2025-07-29 20:17:02.637 | INFO     | __main__:main:74 - Processing batch 10 with 200 records
2025-07-29 20:17:02.637 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 200 case records
2025-07-29 20:17:02.637 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:02.650 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:02.651 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:02.652 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 200 records
2025-07-29 20:17:02.940 | INFO     | __main__:main:74 - Processing batch 11 with 85 records
2025-07-29 20:17:02.940 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 85 case records
2025-07-29 20:17:02.940 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:02.944 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:02.945 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:02.946 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 85 records
2025-07-29 20:17:02.947 | INFO     | __main__:main:100 - Extracted 58 case records
2025-07-29 20:17:02.947 | INFO     | __main__:main:103 - Processing text data...
2025-07-29 20:17:02.947 | INFO     | src.utils.text_processor:preprocess_case_data:34 - Preprocessing 58 case records
2025-07-29 20:17:02.947 | INFO     | src.utils.text_processor:_validate_data:246 - Performing data validation...
2025-07-29 20:17:02.965 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:294 - Detecting duplicate cases...
2025-07-29 20:17:02.965 | INFO     | src.utils.text_processor:_detect_and_handle_duplicates:301 - Found 35 exact text duplicates
2025-07-29 20:17:02.970 | INFO     | src.utils.text_processor:_apply_quality_filters:366 - Applying quality filters...
2025-07-29 20:17:02.982 | INFO     | src.utils.text_processor:preprocess_case_data:86 - Quality control filtered out 35 records
2025-07-29 20:17:02.982 | INFO     | src.utils.text_processor:get_text_stats:233 - Text statistics: {'total_records': 23, 'avg_text_length': 5816.260869565217, 'min_text_length': 446, 'max_text_length': 15920, 'median_text_length': 4356.0, 'empty_text_count': 0}
2025-07-29 20:17:02.982 | INFO     | __main__:main:108 - Text processing complete. Stats: {'total_records': 23, 'avg_text_length': 5816.260869565217, 'min_text_length': 446, 'max_text_length': 15920, 'median_text_length': 4356.0, 'empty_text_count': 0}
2025-07-29 20:17:02.982 | INFO     | __main__:main:111 - Building FAISS vector index...
2025-07-29 20:17:02.982 | INFO     | src.vectorization.vector_db:build_index:111 - Building production-scale FAISS index from 23 cases
2025-07-29 20:17:02.982 | INFO     | src.vectorization.vector_db:_load_model:41 - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-29 20:17:02.990 | INFO     | src.vectorization.vector_db:_load_model:45 - Using device: mps
2025-07-29 20:17:06.850 | INFO     | src.vectorization.vector_db:_load_model:50 - Model loaded successfully for local execution
2025-07-29 20:17:06.851 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:162 - Creating embeddings for 23 texts in batches of 500
2025-07-29 20:17:06.967 | INFO     | src.utils.performance_metrics:record_batch_processing:124 - Batch embedding: 23/23 records in 116ms (198.7 records/sec)
2025-07-29 20:17:06.967 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:191 - Embedding progress: 100.0% (23/23)
2025-07-29 20:17:06.967 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:208 - Created embeddings with shape: (23, 384)
2025-07-29 20:17:06.968 | INFO     | src.vectorization.vector_db:_create_production_index:251 - Created IndexFlatIP for 23 vectors
2025-07-29 20:17:06.968 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:265 - Adding 23 vectors to index in batches of 5000
2025-07-29 20:17:06.968 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:274 - Indexing progress: 100.0% (23/23)
2025-07-29 20:17:06.968 | INFO     | src.vectorization.vector_db:_store_metadata_batch:283 - Storing case metadata...
2025-07-29 20:17:06.970 | INFO     | src.vectorization.vector_db:_store_metadata_batch:308 - Stored metadata for 23/23 cases
2025-07-29 20:17:06.970 | INFO     | src.vectorization.vector_db:build_index:141 - Production FAISS index built successfully with 23 vectors
2025-07-29 20:17:06.970 | INFO     | src.vectorization.vector_db:_log_index_metrics:328 - Index metrics: {'total_vectors': 23, 'index_type': 'IndexFlatIP', 'memory_usage_mb': '577.8', 'vectors_per_mb': '0.0'}
2025-07-29 20:17:06.970 | INFO     | __main__:main:115 - Saving vector index...
2025-07-29 20:17:06.970 | INFO     | src.utils.backup_manager:create_backup:52 - Creating backup 20250729_201706
2025-07-29 20:17:06.971 | INFO     | src.utils.backup_manager:create_backup:59 - Backed up index to data/backups/20250729_201706/faiss_index.bin
2025-07-29 20:17:06.972 | INFO     | src.utils.backup_manager:create_backup:67 - Backed up metadata to data/backups/20250729_201706/case_metadata.json
2025-07-29 20:17:06.972 | INFO     | src.utils.backup_manager:create_backup:95 - Backup 20250729_201706 created successfully
2025-07-29 20:17:06.972 | INFO     | src.vectorization.vector_db:save_index:416 - Created backup 20250729_201706 before saving
2025-07-29 20:17:06.972 | INFO     | src.vectorization.vector_db:save_index:422 - FAISS index saved to data/faiss_index.bin
2025-07-29 20:17:06.973 | INFO     | src.vectorization.vector_db:save_index:427 - Metadata saved to data/case_metadata.json
2025-07-29 20:17:06.973 | INFO     | __main__:main:131 - Index build complete! Final stats: {'is_trained': True, 'total_vectors': 23, 'dimension': 384, 'index_type': 'IndexIVFPQ', 'model_name': 'sentence-transformers/all-MiniLM-L6-v2', 'metadata_count': 23}
2025-07-29 20:17:06.973 | INFO     | __main__:main:134 - Testing search functionality...
2025-07-29 20:17:06.973 | INFO     | src.vectorization.vector_db:create_embeddings:84 - Creating embeddings for 1 texts
2025-07-29 20:17:07.022 | INFO     | src.vectorization.vector_db:create_embeddings:98 - Created embeddings with shape: (1, 384)
2025-07-29 20:17:07.022 | INFO     | src.vectorization.vector_db:search:384 - Found 2 similar cases above threshold 0.4
2025-07-29 20:17:07.023 | INFO     | __main__:main:136 - Test search returned 2 results
2025-07-29 20:17:07.023 | INFO     | __main__:main:138 - FAISS index build process completed successfully!
