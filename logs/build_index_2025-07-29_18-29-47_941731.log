2025-07-29 18:29:47.944 | INFO     | __main__:main:37 - Starting FAISS index build process
2025-07-29 18:29:47.944 | INFO     | __main__:main:50 - Initializing SFDC client...
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:34 - Connecting to Salesforce with:
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:35 -   Username: jaykarki@algo.com
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:36 -   Login URL: https://login.salesforce.com
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:37 -   Domain: login
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:38 -   API Version: 58.0
2025-07-29 18:29:47.944 | INFO     | src.data_extraction.sfdc_client:_connect:39 -   Security Token: ************************
2025-07-29 18:29:49.371 | INFO     | src.data_extraction.sfdc_client:_connect:49 - Successfully connected to Salesforce
2025-07-29 18:29:49.759 | INFO     | src.data_extraction.sfdc_client:test_connection:220 - Salesforce connection test successful
2025-07-29 18:29:49.760 | INFO     | __main__:main:58 - Initializing text processor...
2025-07-29 18:29:49.760 | INFO     | __main__:main:61 - Initializing vector database...
2025-07-29 18:29:49.761 | INFO     | __main__:main:65 - Extracting case data from Salesforce...
2025-07-29 18:29:51.089 | INFO     | __main__:main:74 - Processing batch 1 with 200 records
2025-07-29 18:29:51.090 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:51.839 | INFO     | __main__:main:74 - Processing batch 2 with 200 records
2025-07-29 18:29:51.839 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:52.912 | INFO     | __main__:main:74 - Processing batch 3 with 200 records
2025-07-29 18:29:52.913 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:54.158 | INFO     | __main__:main:74 - Processing batch 4 with 200 records
2025-07-29 18:29:54.158 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:55.036 | INFO     | __main__:main:74 - Processing batch 5 with 200 records
2025-07-29 18:29:55.037 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:55.095 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 1 records with insufficient text
2025-07-29 18:29:55.541 | INFO     | __main__:main:74 - Processing batch 6 with 200 records
2025-07-29 18:29:55.541 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:55.551 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:29:56.028 | INFO     | __main__:main:74 - Processing batch 7 with 200 records
2025-07-29 18:29:56.029 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:56.038 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:29:56.441 | INFO     | __main__:main:74 - Processing batch 8 with 200 records
2025-07-29 18:29:56.441 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:56.449 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:29:56.740 | INFO     | __main__:main:74 - Processing batch 9 with 200 records
2025-07-29 18:29:56.741 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:56.754 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:29:57.033 | INFO     | __main__:main:74 - Processing batch 10 with 200 records
2025-07-29 18:29:57.033 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:29:57.044 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:29:57.277 | INFO     | __main__:main:74 - Processing batch 11 with 85 records
2025-07-29 18:29:57.278 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 85 case records
2025-07-29 18:29:57.286 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 85 records with insufficient text
2025-07-29 18:29:57.289 | INFO     | __main__:main:100 - Extracted 999 case records
2025-07-29 18:29:57.289 | INFO     | __main__:main:103 - Processing text data...
2025-07-29 18:29:57.289 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 999 case records
2025-07-29 18:29:57.747 | INFO     | src.utils.text_processor:get_text_stats:216 - Text statistics: {'total_records': 999, 'avg_text_length': 9076.28128128128, 'min_text_length': 446, 'max_text_length': 20180, 'median_text_length': 10720.0, 'empty_text_count': 0}
2025-07-29 18:29:57.747 | INFO     | __main__:main:108 - Text processing complete. Stats: {'total_records': 999, 'avg_text_length': 9076.28128128128, 'min_text_length': 446, 'max_text_length': 20180, 'median_text_length': 10720.0, 'empty_text_count': 0}
2025-07-29 18:29:57.747 | INFO     | __main__:main:111 - Building FAISS vector index...
2025-07-29 18:29:57.747 | INFO     | src.vectorization.vector_db:build_index:104 - Building production-scale FAISS index from 999 cases
2025-07-29 18:29:57.747 | INFO     | src.vectorization.vector_db:_load_model:35 - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-29 18:29:57.755 | INFO     | src.vectorization.vector_db:_load_model:39 - Using device: mps
2025-07-29 18:30:01.573 | INFO     | src.vectorization.vector_db:_load_model:44 - Model loaded successfully for local execution
2025-07-29 18:30:01.573 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:155 - Creating embeddings for 999 texts in batches of 500
2025-07-29 18:30:02.879 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:172 - Embedding progress: 50.1% (500/999)
2025-07-29 18:30:04.149 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:172 - Embedding progress: 100.0% (999/999)
2025-07-29 18:30:04.150 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:185 - Created embeddings with shape: (999, 384)
2025-07-29 18:30:04.151 | INFO     | src.vectorization.vector_db:_create_production_index:228 - Created IndexFlatIP for 999 vectors
2025-07-29 18:30:04.151 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:242 - Adding 999 vectors to index in batches of 5000
2025-07-29 18:30:04.151 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:251 - Indexing progress: 100.0% (999/999)
2025-07-29 18:30:04.151 | INFO     | src.vectorization.vector_db:_store_metadata_batch:260 - Storing case metadata...
2025-07-29 18:30:04.168 | INFO     | src.vectorization.vector_db:_store_metadata_batch:281 - Stored metadata for 999/999 cases
2025-07-29 18:30:04.168 | INFO     | src.vectorization.vector_db:build_index:134 - Production FAISS index built successfully with 999 vectors
2025-07-29 18:30:04.168 | INFO     | src.vectorization.vector_db:_log_index_metrics:301 - Index metrics: {'total_vectors': 999, 'index_type': 'IndexFlatIP', 'memory_usage_mb': '769.2', 'vectors_per_mb': '1.3'}
2025-07-29 18:30:04.168 | INFO     | __main__:main:115 - Saving vector index...
2025-07-29 18:30:04.169 | INFO     | src.vectorization.vector_db:save_index:377 - FAISS index saved to data/faiss_index.bin
2025-07-29 18:30:04.180 | INFO     | src.vectorization.vector_db:save_index:382 - Metadata saved to data/case_metadata.json
2025-07-29 18:30:04.180 | INFO     | __main__:main:131 - Index build complete! Final stats: {'is_trained': True, 'total_vectors': 999, 'dimension': 384, 'index_type': 'IndexIVFPQ', 'model_name': 'sentence-transformers/all-MiniLM-L6-v2', 'metadata_count': 999}
2025-07-29 18:30:04.180 | INFO     | __main__:main:134 - Testing search functionality...
2025-07-29 18:30:04.181 | INFO     | src.vectorization.vector_db:create_embeddings:77 - Creating embeddings for 1 texts
2025-07-29 18:30:04.482 | INFO     | src.vectorization.vector_db:create_embeddings:91 - Created embeddings with shape: (1, 384)
2025-07-29 18:30:04.482 | INFO     | src.vectorization.vector_db:search:352 - Found 0 similar cases above threshold 0.7
2025-07-29 18:30:04.482 | INFO     | __main__:main:136 - Test search returned 0 results
2025-07-29 18:30:04.482 | INFO     | __main__:main:138 - FAISS index build process completed successfully!
