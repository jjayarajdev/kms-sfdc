2025-07-29 18:21:48.199 | INFO     | __main__:main:37 - Starting FAISS index build process
2025-07-29 18:21:48.199 | INFO     | __main__:main:50 - Initializing SFDC client...
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:34 - Connecting to Salesforce with:
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:35 -   Username: jaykarki@algo.com
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:36 -   Login URL: https://login.salesforce.com
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:37 -   Domain: login
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:38 -   API Version: 58.0
2025-07-29 18:21:48.199 | INFO     | src.data_extraction.sfdc_client:_connect:39 -   Security Token: ************************
2025-07-29 18:21:49.719 | INFO     | src.data_extraction.sfdc_client:_connect:49 - Successfully connected to Salesforce
2025-07-29 18:21:50.123 | INFO     | src.data_extraction.sfdc_client:test_connection:220 - Salesforce connection test successful
2025-07-29 18:21:50.124 | INFO     | __main__:main:58 - Initializing text processor...
2025-07-29 18:21:50.124 | INFO     | __main__:main:61 - Initializing vector database...
2025-07-29 18:21:50.125 | INFO     | __main__:main:65 - Extracting case data from Salesforce...
2025-07-29 18:21:51.557 | INFO     | __main__:main:74 - Processing batch 1 with 200 records
2025-07-29 18:21:51.557 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:52.815 | INFO     | __main__:main:74 - Processing batch 2 with 200 records
2025-07-29 18:21:52.820 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:53.970 | INFO     | __main__:main:74 - Processing batch 3 with 200 records
2025-07-29 18:21:53.970 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:55.248 | INFO     | __main__:main:74 - Processing batch 4 with 200 records
2025-07-29 18:21:55.249 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:56.110 | INFO     | __main__:main:74 - Processing batch 5 with 200 records
2025-07-29 18:21:56.110 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:56.169 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 1 records with insufficient text
2025-07-29 18:21:56.579 | INFO     | __main__:main:74 - Processing batch 6 with 200 records
2025-07-29 18:21:56.580 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:56.592 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:21:57.102 | INFO     | __main__:main:74 - Processing batch 7 with 200 records
2025-07-29 18:21:57.102 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:57.113 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:21:57.503 | INFO     | __main__:main:74 - Processing batch 8 with 200 records
2025-07-29 18:21:57.503 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:57.510 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:21:57.912 | INFO     | __main__:main:74 - Processing batch 9 with 200 records
2025-07-29 18:21:57.913 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:57.921 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:21:58.320 | INFO     | __main__:main:74 - Processing batch 10 with 200 records
2025-07-29 18:21:58.321 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 18:21:58.332 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 200 records with insufficient text
2025-07-29 18:21:58.737 | INFO     | __main__:main:74 - Processing batch 11 with 85 records
2025-07-29 18:21:58.738 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 85 case records
2025-07-29 18:21:58.747 | INFO     | src.utils.text_processor:preprocess_case_data:69 - Filtered out 85 records with insufficient text
2025-07-29 18:21:58.750 | INFO     | __main__:main:100 - Extracted 999 case records
2025-07-29 18:21:58.750 | INFO     | __main__:main:103 - Processing text data...
2025-07-29 18:21:58.751 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 999 case records
2025-07-29 18:21:59.210 | INFO     | src.utils.text_processor:get_text_stats:216 - Text statistics: {'total_records': 999, 'avg_text_length': 9076.28128128128, 'min_text_length': 446, 'max_text_length': 20180, 'median_text_length': 10720.0, 'empty_text_count': 0}
2025-07-29 18:21:59.210 | INFO     | __main__:main:108 - Text processing complete. Stats: {'total_records': 999, 'avg_text_length': 9076.28128128128, 'min_text_length': 446, 'max_text_length': 20180, 'median_text_length': 10720.0, 'empty_text_count': 0}
2025-07-29 18:21:59.210 | INFO     | __main__:main:111 - Building FAISS vector index...
2025-07-29 18:21:59.210 | INFO     | src.vectorization.vector_db:build_index:104 - Building production-scale FAISS index from 999 cases
2025-07-29 18:21:59.210 | INFO     | src.vectorization.vector_db:_load_model:35 - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-29 18:21:59.218 | INFO     | src.vectorization.vector_db:_load_model:39 - Using device: mps
2025-07-29 18:22:03.026 | INFO     | src.vectorization.vector_db:_load_model:44 - Model loaded successfully for local execution
2025-07-29 18:22:03.027 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:155 - Creating embeddings for 999 texts in batches of 500
2025-07-29 18:22:04.515 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:172 - Embedding progress: 50.1% (500/999)
2025-07-29 18:22:05.791 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:172 - Embedding progress: 100.0% (999/999)
2025-07-29 18:22:05.791 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:185 - Created embeddings with shape: (999, 384)
2025-07-29 18:22:05.792 | INFO     | src.vectorization.vector_db:_create_production_index:228 - Created IndexFlatIP for 999 vectors
2025-07-29 18:22:05.792 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:242 - Adding 999 vectors to index in batches of 5000
2025-07-29 18:22:05.792 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:251 - Indexing progress: 100.0% (999/999)
2025-07-29 18:22:05.792 | INFO     | src.vectorization.vector_db:_store_metadata_batch:260 - Storing case metadata...
2025-07-29 18:22:05.809 | INFO     | src.vectorization.vector_db:_store_metadata_batch:281 - Stored metadata for 999/999 cases
2025-07-29 18:22:05.809 | INFO     | src.vectorization.vector_db:build_index:134 - Production FAISS index built successfully with 999 vectors
2025-07-29 18:22:05.809 | INFO     | src.vectorization.vector_db:_log_index_metrics:301 - Index metrics: {'total_vectors': 999, 'index_type': 'IndexFlatIP', 'memory_usage_mb': '775.2', 'vectors_per_mb': '1.3'}
2025-07-29 18:22:05.809 | INFO     | __main__:main:115 - Saving vector index...
2025-07-29 18:22:05.810 | INFO     | src.vectorization.vector_db:save_index:377 - FAISS index saved to data/faiss_index.bin
2025-07-29 18:22:05.814 | INFO     | src.vectorization.vector_db:save_index:382 - Metadata saved to data/case_metadata.json
2025-07-29 18:22:05.814 | INFO     | __main__:main:131 - Index build complete! Final stats: {'is_trained': True, 'total_vectors': 999, 'dimension': 384, 'index_type': 'IndexIVFPQ', 'model_name': 'sentence-transformers/all-MiniLM-L6-v2', 'metadata_count': 999}
2025-07-29 18:22:05.814 | INFO     | __main__:main:134 - Testing search functionality...
2025-07-29 18:22:05.814 | INFO     | src.vectorization.vector_db:create_embeddings:77 - Creating embeddings for 1 texts
2025-07-29 18:22:05.860 | INFO     | src.vectorization.vector_db:create_embeddings:91 - Created embeddings with shape: (1, 384)
2025-07-29 18:22:05.860 | INFO     | src.vectorization.vector_db:search:352 - Found 0 similar cases above threshold 0.7
2025-07-29 18:22:05.860 | INFO     | __main__:main:136 - Test search returned 0 results
2025-07-29 18:22:05.860 | INFO     | __main__:main:138 - FAISS index build process completed successfully!
