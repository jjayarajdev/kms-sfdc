2025-07-29 16:29:28.554 | INFO     | __main__:main:37 - Starting FAISS index build process
2025-07-29 16:29:28.554 | INFO     | __main__:main:50 - Initializing SFDC client...
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:34 - Connecting to Salesforce with:
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:35 -   Username: jaykarki@algo.com
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:36 -   Login URL: https://login.salesforce.com
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:37 -   Domain: login
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:38 -   API Version: 58.0
2025-07-29 16:29:28.554 | INFO     | src.data_extraction.sfdc_client:_connect:39 -   Security Token: ************************
2025-07-29 16:29:29.928 | INFO     | src.data_extraction.sfdc_client:_connect:49 - Successfully connected to Salesforce
2025-07-29 16:29:30.331 | INFO     | src.data_extraction.sfdc_client:test_connection:207 - Salesforce connection test successful
2025-07-29 16:29:30.332 | INFO     | __main__:main:58 - Initializing text processor...
2025-07-29 16:29:30.332 | INFO     | __main__:main:61 - Initializing vector database...
2025-07-29 16:29:30.333 | INFO     | __main__:main:65 - Extracting case data from Salesforce...
2025-07-29 16:29:30.852 | INFO     | __main__:main:74 - Processing batch 1 with 200 records
2025-07-29 16:29:30.853 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 16:29:31.534 | INFO     | __main__:main:74 - Processing batch 2 with 200 records
2025-07-29 16:29:31.534 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 16:29:31.585 | INFO     | src.utils.text_processor:preprocess_case_data:54 - Filtered out 14 records with insufficient text
2025-07-29 16:29:31.954 | INFO     | __main__:main:74 - Processing batch 3 with 200 records
2025-07-29 16:29:31.954 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 16:29:32.392 | INFO     | __main__:main:74 - Processing batch 4 with 200 records
2025-07-29 16:29:32.392 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 16:29:33.042 | INFO     | __main__:main:74 - Processing batch 5 with 200 records
2025-07-29 16:29:33.042 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 200 case records
2025-07-29 16:29:33.407 | INFO     | __main__:main:74 - Processing batch 6 with 93 records
2025-07-29 16:29:33.408 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 93 case records
2025-07-29 16:29:33.418 | INFO     | __main__:main:100 - Extracted 1079 case records
2025-07-29 16:29:33.418 | INFO     | __main__:main:103 - Processing text data...
2025-07-29 16:29:33.418 | INFO     | src.utils.text_processor:preprocess_case_data:29 - Preprocessing 1079 case records
2025-07-29 16:29:33.519 | INFO     | src.utils.text_processor:get_text_stats:186 - Text statistics: {'total_records': 1079, 'avg_text_length': 1009.5245597775719, 'min_text_length': 25, 'max_text_length': 11812, 'median_text_length': 151.0, 'empty_text_count': 0}
2025-07-29 16:29:33.519 | INFO     | __main__:main:108 - Text processing complete. Stats: {'total_records': 1079, 'avg_text_length': 1009.5245597775719, 'min_text_length': 25, 'max_text_length': 11812, 'median_text_length': 151.0, 'empty_text_count': 0}
2025-07-29 16:29:33.519 | INFO     | __main__:main:111 - Building FAISS vector index...
2025-07-29 16:29:33.519 | INFO     | src.vectorization.vector_db:build_index:79 - Building production-scale FAISS index from 1079 cases
2025-07-29 16:29:33.519 | INFO     | src.vectorization.vector_db:_load_model:36 - Using sentence-transformers as Nomic API is being updated
2025-07-29 16:29:33.519 | INFO     | src.vectorization.vector_db:_load_model:41 - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-07-29 16:29:37.829 | INFO     | src.vectorization.vector_db:_load_model:43 - Model loaded successfully for local execution
2025-07-29 16:29:37.829 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:130 - Creating embeddings for 1079 texts in batches of 5000
2025-07-29 16:29:40.255 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:147 - Embedding progress: 100.0% (1079/1079)
2025-07-29 16:29:40.255 | INFO     | src.vectorization.vector_db:_create_embeddings_large_scale:160 - Created embeddings with shape: (1079, 384)
2025-07-29 16:29:40.256 | INFO     | src.vectorization.vector_db:_create_production_index:203 - Created IndexFlatIP for 1079 vectors
2025-07-29 16:29:40.257 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:217 - Adding 1079 vectors to index in batches of 50000
2025-07-29 16:29:40.257 | INFO     | src.vectorization.vector_db:_add_embeddings_batch:226 - Indexing progress: 100.0% (1079/1079)
2025-07-29 16:29:40.257 | INFO     | src.vectorization.vector_db:_store_metadata_batch:235 - Storing case metadata...
2025-07-29 16:29:40.273 | INFO     | src.vectorization.vector_db:_store_metadata_batch:256 - Stored metadata for 1079/1079 cases
2025-07-29 16:29:40.273 | INFO     | src.vectorization.vector_db:build_index:109 - Production FAISS index built successfully with 1079 vectors
2025-07-29 16:29:40.273 | INFO     | src.vectorization.vector_db:_log_index_metrics:276 - Index metrics: {'total_vectors': 1079, 'index_type': 'IndexFlatIP', 'memory_usage_mb': '706.2', 'vectors_per_mb': '1.5'}
2025-07-29 16:29:40.273 | INFO     | __main__:main:115 - Saving vector index...
2025-07-29 16:29:40.274 | INFO     | src.vectorization.vector_db:save_index:352 - FAISS index saved to data/faiss_index.bin
2025-07-29 16:29:40.278 | INFO     | src.vectorization.vector_db:save_index:357 - Metadata saved to data/case_metadata.json
2025-07-29 16:29:40.278 | INFO     | __main__:main:131 - Index build complete! Final stats: {'is_trained': True, 'total_vectors': 1079, 'dimension': 384, 'index_type': 'IndexIVFPQ', 'model_name': 'nomic-embed-text-v1.5', 'metadata_count': 1079}
2025-07-29 16:29:40.278 | INFO     | __main__:main:134 - Testing search functionality...
2025-07-29 16:29:40.278 | INFO     | src.vectorization.vector_db:create_embeddings:57 - Creating embeddings for 1 texts
2025-07-29 16:29:40.947 | INFO     | src.vectorization.vector_db:create_embeddings:66 - Created embeddings with shape: (1, 384)
2025-07-29 16:29:40.947 | INFO     | src.vectorization.vector_db:search:327 - Found 0 similar cases above threshold 0.7
2025-07-29 16:29:40.947 | INFO     | __main__:main:136 - Test search returned 0 results
2025-07-29 16:29:40.947 | INFO     | __main__:main:138 - FAISS index build process completed successfully!
